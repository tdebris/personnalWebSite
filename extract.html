<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extracting Text from an HTML Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f7f7f7;
        }
        h1 {
            color: #333;
        }
        .code-container {
            background-color: #f4f4f4;
            border: 1px solid #ddd;
            padding: 20px;
            border-radius: 8px;
            white-space: pre-wrap;
            font-family: Consolas, monospace;
        }
    </style>
</head>
<body>

<h1>Extracting Text from an HTML Page with Python</h1>

<p>This code uses the Python libraries <strong>BeautifulSoup</strong> and <strong>requests</strong> to extract and clean text from an HTML page. It replaces &lt;br&gt; and &lt;p&gt; tags with line breaks and saves the cleaned text in a .txt file.</p>

<div class="code-container">
<pre>
from bs4 import BeautifulSoup
import requests

# Function to extract and clean text from HTML page while preserving line breaks
def extract_text_from_html(url, output_filename):
    # Step 1: Fetch the HTML content from the URL
    response = requests.get(url)
    if response.status_code != 200:
        print("Error: Unable to fetch the page.")
        return
    
    # Step 2: Parse HTML with BeautifulSoup
    soup = BeautifulSoup(response.content, 'html.parser')
    
    # Step 3: Replace &lt;br&gt; and &lt;p&gt; tags with newline characters
    for br in soup.find_all("br"):
        br.replace_with("\n")
    for p in soup.find_all("p"):
        p.insert_after("\n")

    # Step 4: Extract text while preserving line breaks
    text = soup.get_text()

    # Step 5: Clean the text (remove any excessive whitespace but preserve newlines)
    lines = [line.strip() for line in text.splitlines() if line.strip()]
    clean_text = "\n".join(lines)

    # Step 6: Write the cleaned text to a .txt file
    with open(output_filename, 'w', encoding='utf-8') as file:
        file.write(clean_text)
    
    print(f"Text extracted and saved to {output_filename}")

# Example usage
url = "http://abu.cnam.fr/cgi-bin/donner_html?machine3"  # Replace with the URL of the HTML page you want to extract text from
output_filename = "/Users/tdebris/Desktop/Programmation/SageMath/pascal.txt"  # Replace with your desired output file path
extract_text_from_html(url, output_filename)
</pre>
</div>

</body>
</html>
